<!DOCTYPE html>
<html>
  <title>JSSP</title>
  <body>
    <div style='position:absolute;'>
    <h1><img src='logo.png' style='vertical-align:middle;width:64px;height:64px'></img> JSSP Demo</h1>
      <div style='width:400px'>
      <?
      var fs = require('fs');
      fs.readdir(__dirname,wrapper(function(err,files)
      {
      	echo('<ol>');
      	for(var i=0;i<files.length;i++)
      	{
          var str = '<li><a href="{name}"><strong>{name}</strong></a>'
                   +'&nbsp;&nbsp;&nbsp;&nbsp;'
                   +'<a href="showsrc.jssp?file={name}">src</a></li>';
      		str = str.replace('{name}',files[i]);
          str = str.replace('{name}',files[i]);
          str = str.replace('{name}',files[i]);
      		echo(str);
      	}
    		echo('</ol>');
    	}));
    ?>
    </div>
    <div style='position:absolute;top:100px;left:300px'>
      <textarea id='textcode' style='width:500px;height:380px'>
      </textarea>
      <button style='float:right' onclick = 'submitcode()'>Submit Code</button>
    </div>
  <div>

<script>
  var str = 'Global Variable & Function:\n'
           +'  __filename __dirname global $_GET $_POST $_FILE $_SERVER $_ENV\n'
           +'  echo exit wrapper include set_time_limit session_read session_write header headers_sent\n\n';
  textcode.value = str + '\<\?  echo("Hello");  \?\>';
  function submitcode()
  {
      var code = str2hexcode(textcode.value);
      window.location.href='submitcode.jssp?code='+code;
  }
  function str2hexcode(str)
  {
    var ret = '';
    for(var i=0;i<str.length;i++)
    {
      ret += ('00'+str.charCodeAt(i).toString(16)).slice(-2);
    }
    return ret;
  }
</script>
</body>
</html>